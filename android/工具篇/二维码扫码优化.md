#### 二维码扫码库介绍
- 二维码又称QR Code，QR全称Quick Response，是一个近几年来移动设备上超流行的一种编码方式，它比传统的Bar Code条形码能存更多的信息，也能表示更多的数据类型。
- 某种特定的几何图形按一定规律在平面（二维方向上）分布的黑白相间的图形记录数据符号信息的；在代码编制上巧妙地利用构成计算机内部逻辑基础的“0”、“1”比特流的概念，使用若干个与二进制相对应的几何形体来表示文字数值信息，通过图象输入设备或光电扫描设备自动识读以实现信息自动处理
- 它具有条码技术的一些共性：每种码制有其特定的字符集；每个字符占有一定的宽度；具有一定的校验功能等。同时还具有对不同行的信息自动识别功能、及处理图形旋转变化点。


#### 目前市面上的 主流的二维码解析库主要有Zxing及Zbar

- Zxing是一个开源Java类库用于解析多种格式的1D/2D条形码，能够对QR编码、Data Matrix、UPC的1D条形码进行解码。其提供了多种平台下的客户端包括：J2ME、J2SE和Android等。目前在android 手机上应用广泛。
- Zbar用C/C++实现，Zbar 可以直接扫码二维码和条码，在iphone上应用广泛。


- 关于相机的打开速度与对焦速度这块涉及到具体的手机性能。暂且不能进行应用层面的优化。下面主要探讨Zxing的优化，提高扫码速度与效率。
    1. 减少解码格式，根据业务需求将解码格式删减到只支持特定码制的格式。
        - 常见的格式有：QR 二维码，Aztec，Code128，Code39等
        - 我们常用的二维码格式是QR Code，一维码格式为Code 128, 如果无特殊要求，这两种格式就能满足一般的条码与二维码的需求。
        - 在解码过程中减少一种解码，就会减少解析时间，提高解码速度。
        - 做法：
            - DecodeFormatManager以及DecodeThread中去除多余解码格式
    2. 解码算法的优化
        1. 第一部分：二值化
        2. 第二部分：
            1. 寻找定位符
            2. 寻找校正符
            3. 转换矩阵
        3. 做法：zxing中读取条码主要涉及4个类，分别是LuminanceSource、Binarizer、BinaryBitmap和MultiFormatReader。第1、2和4是抽象类，根据对象的不同有不同的具体实现。LuminanceSource类用于存放图片数据，binarizer用于二值化图片，BinaryBitmap用于存放二值化图片，MultiFormatReader用于解码。
            1. 二值化：二值化，将图片的色域变成黑白两个颜色，然后提取图形中的二维码矩阵。
                - 官网上介绍GlobalHistogramBinarizer算法适合低端设备，对手机CPU和内存要求不高。但它选择了全部的黑点来计算，因此无法处理阴影和渐变这两种情况。HybridBinarizer的算法在执行效率上要慢于GlobalHistogramBinarizer算法，但识别相对更加有效，它专门以白色为背景的连续黑块二维码图像解析而设计，也更适合来解析更具有严重阴影和渐变的二维码图像。
                - zxing项目官方默认使用的是HybridBinarizer二值化方法。然而目前的大部分二维码都是黑色二维码，白色背景的。不管是二维码扫描还是二维码图像识别，使用GlobalHistogramBinarizer算法的效果要稍微比HybridBinarizer好一些，识别的速度更快，对低分辨的图像识别精度更高。
            2. 减少解码数据：
                - 官方为了减少解码的数据，提高解码效率和速度，利用扫码区域范围来裁剪裁剪无用区域，减少解码数据。我们在开发过程可以调整好扫码区域，减少解码的数据量
            3. 选择相机的最佳预览尺寸：
                - 现在基本上每个摄像头支持好几种不同的预览尺寸（parameters.getSupportedPreviewSizes())，我们可以根据屏幕尺寸来选择相机最适合的预览尺寸，当然如果相机支持的预览尺寸与屏幕尺寸一样更好,否则就找到宽高比相同，尺寸最为接近的。
            4. 设置适合的放大倍数：
                - 索性相机的参数设定里给我们提供了最大的放大倍数值，通过取放大倍数值的N分之一作为当前的放大倍数，就完美地解决了手机的适配问题。
            5. zxing默认的聚焦时间是2000ms，扫码是在每一次调焦后出发取图解析。这里的聚焦时间也会影响到。缩短聚焦时间，提高解析频率，就会增加扫码性能。缺点就是耗电量增加
                - 如果你设置的这个聚焦间隔时间小于了手机厂家默认设计的相机聚焦间隔就会导致程序的崩溃。这个设置请慎重使用。聚焦时间的调整也很简单，在AutoFocusCallback这个类里，调整AUTO_FOCUS_INTERVAL_MS这个值就可以了。
            6. 设置自动对焦区域：
                - 对焦不及时，导致扫码慢。通过api  camera.setFocusAreas设置对焦区域，提高对焦效果。
            7. 调整合理扫描区域








#### 补充微信扫码快速的原因
微信扫码使用了自家开发的QBar引擎，并导入了预判算法，在识别条码之前会过滤无码图像，只识别有意义的内容——二维码和条形码。整个扫码预判模块位于核心识别引擎之前，不再需要对输入的视频中的每一帧图像进行检测识别，能实现快速过滤大量无码图像，减少后续不必要的定位和识别对扫码客户端造成的阻塞，使响应更加及时，增加扫码过程中的流畅度，而这就是微信扫码快速的关键原因。

            
