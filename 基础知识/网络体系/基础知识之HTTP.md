### 网络基础知识之HTTP

1. 位于网络协议体系结构的: 应用层;
2. 作用: 规定了应用进程间通讯(请求&响应)的准则
3. 特点:
    1. 无连接: HTTP本身是无连接的, 即交换HTTP报文前不需要建立HTTP连接
    2. 无状态: HTTP协议是无状态的,数据传输过程中,并不保存任何历史信息和状态信息.无状态特点简化了服务器的设计, 使服务器可以更容易支持大量并发的HTTP请求;同时使得HTTP传输准确性丢失
    3. 传输可靠性高: 采用TCP作为运输层协议(面向连接,可靠传输),即交换报文时需要预先建立TCP连接
    4. 兼容性好:支持B/S 和C/S模式
    5. 简单快速: 客户向服务器请求时,只需要传输请求方法和路径. 请求方法通常有GET ,HEAD POST, DELETE, UPDATE等
    6. 灵活: HTTP允许传输任意类型的数据对象
4. 工作方式:
    1. 
5. 报文解析(请求&响应)
    1. 请求报文
        1. 组成
        2. 请求行：用于声明”请求报文“、主机域名、资源路径和协议版本
            1.    | 请求方法 | 空格 | 请求路径 | 空格 | 协议版本 | \r\n
                1. 请求方法: 
                    1. OPTION请求“选项”的信息
                    2. HEAD请求读取”URL标志信息的首部“信息
                    3. GET请求读取“URL标志的信息“的信息
                    4. POST为服务器添加信息
                    5. PUT为指定的URL下添加（存储）一个文档
                    6. DELETE删除指定URL所标志的信息
                    7. TRACE用于进行环回测试的请求报文
                    8. CONNECT用于代理服务器
                2. 请求路径
                    1.     首先了解一下URL概念(统一资源定位符) <协议>://<主机>:<端口>/<路径>
                3. 协议版本
                    1.     HTTP主要版本: 1.0 ; 1.1 ; 1.2;
            2. 举例:　-URL地址为：http://www.tsinghua.edu.cn/chn/yxsz/index.htm 
- 请求报文采用GET方法 
- 请求报文采用HTTP1.1版本 
则请求行是：GET /chn/yxsz/index.htm HTTP/1.1
        3. 请求头：
            1. 作用:说明客户端、服务器或报文的部分信息
            2. 使用方式：采用”header（字段名）：value（值）“的方式
            3. 常用请求头：
                1. 请求和响应报文的通用Header
                    1. Content-Type :请求体／响应体的类型，如text/plain  , application/json
                    2. Accept: 说明接收的类型, 可以多个值,用','分开(半角逗号)
                    3. Content-Length: 请求头/响应体的长度, 单位字节byte
                    4. Content-Encoding: 编码格式, 如 gzip, deflate
                    5. Accept-Encoding: 告知对方, 我方接收的Content-Encoding
                    6. ETag: 给当前资源的标识, 和Last-Modified, If-None-Match, If-Modified-Since配合使用,用于缓存控制
                    7. Cache-Control: 取值一般为 no-cache, 或 max-age=XX ,XX为整数,表示该资源缓存有效期(秒) 
                2. 常用的请求头header
                    1. Authorization:　用于设置身份认证信息
                    2. User-Agent: 用户标识, 如 OS和浏览器的类型和版本
                    3. If-Modified-Since: 值为上一次服务器返回的Last-Modified值, 用于确认某个资源是否被更改过, 没有更改过(304) 就从缓存中读取
                    4. If-None-Match:　值为上一次服务器返回的Etag值,一般会和If-Modified-Since一起出现
                    5. Cookie:已有的Cookie
                    6. Referer: 表示请求引用自哪个地址 ,比如你从页面A跳转到页面B时, 值为页面A的地址
                    7. Host: 请求的主机和端口号
        4. 请求体：
            1.  作用: 用于存放需要发送给服务器的数据信息
            2. 使用方式:目前来说，　一共有三种
                1. 数据交换格式: 请求体是可以是任意类型的 ,但是服务器需要额外进行解析,如JSON
                2. 键值对格式: 键值对之间用'='连接, 每个键值对之间用'&'连接,且只能用ASCII字符; 如Query String
                3. 分部分形式: 请求体被分为多个部分, 应用场景是文件上传, 比如邮件上传等等
                    1. 每段以 --{boundary}开头
                    2. 然后是该段的描述头
                    3. 描述头之后空一行接内容
                    4. 每段以--{boundary}--结束
                    5. 举例
        5. 请求报文实例
            1. 结合上述说的请求行、请求头和请求体，现假设 
- URL地址为：http://www.tsinghua.edu.cn/chn/yxsz/index.htm 
- 请求报文采用GET方法 
- 请求报文采用HTTP1.1版本 
- 请求报文希望表明主机域名和用户代理是使用Netscape浏览器 
- 请求体采用键值对形式
            2. 
    2. HTTP响应报文
        1. 组成: 与请求报文相比,除了第一行(请求行VS状态行)以外,响应报文的其他结构与请求报文非常相似. 其中,响应体是用于存放服务端返回给客户端的数据信息
        2. 状态行
            1. 组成: | 协议版本 | 空格 | 状态码 |　空格　｜ 状态信息 | \r\n
            2. 协议版本: 主要还是 1.0  1.1  2.0
            3. 状态码: (五大类)
                1. 1xx : 表示信息通知, 如请求收到了,或者正在进行处理
                2. 2xx: 表示成功,如接受, 或者 知道了 [202 接受] 
                3. 3xx: 表示重定向, 如要完成请求还必须采取进一步行动  [301 Bad Request]
                4. 4xx: 客户端的错误, 如请求中有错误的语法或不能完成 :　[404 Not found]
                5. 5xx: 表示服务端的差错 , 如服务器失效,无法完成请求
        3. 响应头
            1. 作用:说明客户端、服务器或报文的部分信息
            2. 使用方式：采用”header（字段名）：value（值）“的方式
            3. 常用请求头
                1.     请求与响应通用的header
                2. 响应头的常用Header
                    1.     Date: 服务器的日期
                    2. Last-Modified: 该资源最后被修改的时间
                    3. Transfer-Encoding: 取值一般为chunked,出现在Content-Length不能确定的情况下,表示服务器不知道响应体的数据大小,一般同时还会出现Content-Encoding响应头
                    4. Set-Cookie: 设置Cookie
                    5. Location :重定向到另一个URL, 如输入baidu.com回车,会自动跳转到https://www.baidu.com 就是通过这个响应头控制的
                    6. Server: 后台服务器
        4. 响应体
            1.     作用: 用于存放返回给客户端的数据信息
            2. 使用方式:和请求体是一致的, 同样分为: 
                1.     任意类型的数据交换格式
                2. 键值对形式
                3. 分部分形式
    3. Get与Post的比较
        1. Get:从指定服务器获取数据
            1. Query-String作为键值对被附加在URL地址后面一起发送
            2. Get请求能够被缓存
            3. Get请求会保存在浏览器的浏览记录中
            4. 以Get请求的URL能够保存为浏览器书签
            5. Get请求有长度限制, 一般在1024个字节, 超过限制后后台则无法解析参数
            6. Get请求主要用以获取数据
        2. Post:提交数据给指定服务器处理  
            1. Query-String在post信息中单独存在
            2. Post请求不能被缓存
            3. Post请求不会保存在浏览器记录以及书签
            4. Post请求没有长度限制    
    4. Http与Https的区别
        1.     Http
            1. 通讯使用明文(不加密), 内容可能会被窃听
            2. 不验证通讯方的身份,因为可能遭遇伪装
            3. 无法证明报文的完整性,所以可能会遭遇篡改
        2. Https
            1.     Http+加密+认证+完整性保护
            2. 采用混合加密机制( 共享密钥加密 和 公开密钥加密 )
        3. 通常Http直接与Tcp通信,当使用SSL时,则Http先和SSL通讯,再有SSL和TCP通讯
    5. WebSocket
        1. Ajax与Comet的缺点
        2. 通讯过程可以相互发送Json, Xml, Html, 或者图片等任意格式的数据
        3. 建立在Http基础上的协议
        4. 全双工通讯(可推送,可拉取)
        5. 为了实现WebSocket通讯,在Http连接建立后,需要完成一次"握手"的步骤; 成功握手确立WebSocket连接之后,通讯时不再使用Http的数据帧,而是采用WebSocket独立的数据帧
    6. Http历史版本
        1. Http1.0 每进行一次Http通讯,都要建立和断开一次TCP连接;导致大量的http通讯增加服务器的负担
        2. Http1.1 
            1. 支持持久连接:即只要任意一端没有明确提出断开连接,则保持TCP连接状态. http1.1中默认持久连接
            2. 管线化pipeling: 即并行请求发送
            3. 支持Cookie: 解决状态管理问题, [协议层面], Set-Cookie






参考连接1[Http与Https的基础理论]


















